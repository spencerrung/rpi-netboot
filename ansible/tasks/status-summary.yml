---
# Status and Summary Tasks
# Verifies the setup and displays completion information

- name: Verify NFS export is active
  command: exportfs -v
  register: nfs_exports
  changed_when: false
  tags: [status]

- name: Show completion summary
  debug:
    msg: |
      âœ… Raspberry Pi Network Boot Setup Complete!

      ğŸ“ NFS Root: {{ raspios_root_dir }}
      ğŸŒ NFS Export: {{ raspios_root_dir }} {{ nfs_export_options }}
      ğŸ”§ TFTP Root: {{ tftp_root }}

      Configured Raspberry Pis:
      {% for pi in raspberry_pis %}
      - {{ pi.hostname }} ({{ pi.serial }}): {{ tftp_root }}/{{ pi.serial }}/
      {% endfor %}

      Default Credentials:
      - SSH: {{ pi_username }} (key authentication)
      - Console: {{ pi_username }} / {{ pi_password }}

      Next steps:
      1. Power on your Raspberry Pi(s) with blank SD card
      2. Wait ~60 seconds for network boot
      3. SSH: ssh -i ~/.ssh/raspberrypi_rsa {{ pi_username }}@<pi-ip>
      4. Console: Login with {{ pi_username }}/{{ pi_password }}
  tags: [status]
